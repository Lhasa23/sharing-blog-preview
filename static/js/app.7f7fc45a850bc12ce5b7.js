webpackJsonp([10],{CmQS:function(t,e){},IcnI:function(t,e,n){"use strict";var r=n("7+uW"),a=n("NYxO"),o=n("Xxa5"),i=n.n(o),s=n("exGp"),u=n.n(s),c=n("Pfph"),l={state:{user:null,isLogin:!1},getters:{user:function(t){return t.user},isLogin:function(t){return t.isLogin}},mutations:{setUser:function(t,e){t.user=e.user},setLogin:function(t,e){t.isLogin=e.isLogin}},actions:{logup:function(t,e){var n=t.commit,r=e.username,a=e.password;return c.a.logup({username:r,password:a}).then(function(t){n({type:"setUser",user:t.data}),n("setLogin",{isLogin:!0})})},login:function(t,e){var n=this,r=t.commit,a=e.username,o=e.password;return u()(i.a.mark(function t(){var e;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.a.login({username:a,password:o});case 2:return e=t.sent,r("setUser",{user:e.data}),r("setLogin",{isLogin:!0}),t.abrupt("return",e.data);case 6:case"end":return t.stop()}},t,n)}))()},logout:function(t){var e=this,n=t.commit;return u()(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.a.logout();case 2:n("setUser",{user:null}),n("setLogin",{isLogin:!1});case 4:case"end":return t.stop()}},t,e)}))()},checkLogin:function(t){var e=this,n=t.commit,r=t.state;return u()(i.a.mark(function t(){var a;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!r.isLogin){t.next=2;break}return t.abrupt("return",!0);case 2:return t.next=4,c.a.getInfo();case 4:if(a=t.sent,n("setLogin",{isLogin:a.isLogin}),a.isLogin){t.next=8;break}return t.abrupt("return",!1);case 8:return n("setUser",{user:a.data}),t.abrupt("return",!0);case 10:case"end":return t.stop()}},t,e)}))()}}},d={state:{},getters:{},mutations:{},actions:{}};r.default.use(a.a);var f=new a.a.Store({modules:{auth:l,blog:d}});e.a=f},ItxV:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("7+uW"),a=n("IcnI"),o=n("Dd8w"),i=n.n(o),s=n("NYxO"),u=n("Pfph");window.auth=u.a;var c={name:"MyHeader",data:function(){return{invisible:!0}},computed:i()({},Object(s.c)(["isLogin","user"])),created:function(){var t=this;this.checkLogin().then(function(e){!e&&e||(t.invisible=!1)})},methods:i()({},Object(s.b)(["checkLogin","logout"]),{onLogout:function(){var t=this;this.logout().then(function(){t.$router.push({path:"/"})})}})},l={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("header",{class:{login:t.isLogin,"no-login":!t.isLogin,invisible:t.invisible}},[t.isLogin?[n("h1",[n("router-link",{attrs:{to:"/"}},[t._v("Advance From Log")])],1),t._v(" "),n("router-link",{attrs:{to:"/create"}},[n("el-tooltip",{attrs:{content:"新建博客",placement:"bottom",effect:"light",enterable:!1}},[n("i",{staticClass:"edit el-icon-circle-plus-outline"})])],1),t._v(" "),n("div",{staticClass:"user"},[n("img",{staticClass:"avatar",attrs:{src:t.user.avatar,alt:t.user.username,title:t.user.username}}),t._v(" "),n("ul",[n("li",[n("router-link",{attrs:{to:"/my"}},[t._v("我的")])],1),t._v(" "),n("li",[n("a",{attrs:{href:"#"},on:{click:t.onLogout}},[t._v("注销")])])])])]:[n("h1",[n("router-link",{attrs:{to:"/"}},[t._v("Let's Share")])],1),t._v(" "),n("div",{attrs:{id:"btns"}},[n("router-link",{attrs:{to:"/login"}},[n("el-button",[t._v("登陆")])],1),t._v(" "),n("router-link",{attrs:{to:"/logup"}},[n("el-button",[t._v("注册")])],1)],1)]],2)},staticRenderFns:[]};var d=n("VU/8")(c,l,!1,function(t){n("ItxV")},null,null).exports,f={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("footer",[e("p",[this._v("©Copyright SY")])])}]};var h=n("VU/8")({name:"MyFooter"},f,!1,function(t){n("gbux")},null,null).exports,m={data:function(){return{screenWidth:document.body.clientWidth}},computed:i()({},Object(s.c)(["isLogin"]),{isCollapse:{get:function(){return this.screenWidth<1250},set:function(){}}}),watch:{},mounted:function(){var t=this;window.onresize=function(){t.screenWidth=document.body.clientWidth}},methods:{}},p={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("el-menu",{staticClass:"el-menu-vertical-demo",class:{"no-login":!this.isLogin},attrs:{router:!0,collapse:this.isCollapse}},[e("el-menu-item",{attrs:{index:"/"}},[e("i",{staticClass:"el-icon-location"}),this._v(" "),e("span",{attrs:{slot:"title"},slot:"title"},[this._v("首页")])]),this._v(" "),e("el-menu-item",{attrs:{index:"/create"}},[e("i",{staticClass:"el-icon-setting"}),this._v(" "),e("span",{attrs:{slot:"title"},slot:"title"},[this._v("新增")])])],1)],1)},staticRenderFns:[]};var g={name:"App",components:{MyHeader:d,MyFooter:h,MyNavBar:n("VU/8")(m,p,!1,function(t){n("n/GB")},null,null).exports}},v={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("my-header",{attrs:{id:"header"}}),this._v(" "),e("div",{attrs:{id:"main"}},[e("router-view")],1),this._v(" "),e("my-footer",{attrs:{id:"footer"}})],1)},staticRenderFns:[]};var b=n("VU/8")(g,v,!1,function(t){n("CmQS")},null,null).exports,L=n("/ocq");r.default.use(L.a);var w=new L.a({routes:[{path:"/",name:"Home",component:function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,"wDQo"))}},{path:"/logup",name:"Logup",component:function(){return n.e(3).then(n.bind(null,"N8sk"))}},{path:"/login",name:"Login",component:function(){return n.e(8).then(n.bind(null,"r99a"))}},{path:"/create",name:"Create",component:function(){return Promise.all([n.e(0),n.e(4)]).then(n.bind(null,"6uzt"))},meta:{requiresAuth:!0}},{path:"/detail/:blogId",name:"Detail",component:function(){return Promise.all([n.e(0),n.e(1)]).then(n.bind(null,"CRFR"))}},{path:"/edit/:blogId",name:"Edit",component:function(){return Promise.all([n.e(0),n.e(7)]).then(n.bind(null,"6p3m"))},meta:{requiresAuth:!0}},{path:"/my",name:"My",component:function(){return Promise.all([n.e(0),n.e(2)]).then(n.bind(null,"5zgz"))},meta:{requiresAuth:!0}},{path:"/user/:userId",name:"User",component:function(){return Promise.all([n.e(0),n.e(6)]).then(n.bind(null,"hsIW"))}}]});w.beforeEach(function(t,e,n){t.matched.some(function(t){return t.meta.requiresAuth})?a.a.dispatch("checkLogin").then(function(e){e?n():n({path:"/login",query:{redirect:t.fullPath}})}):n()});var _=w,k=n("pFYg"),x=n.n(k);function y(t){var e="object"===(void 0===t?"undefined":x()(t))?t:new Date(t),n=e.getTime(),r=Date.now()-n,a="";switch(!0){case r<6e4:a="刚刚";break;case r<36e5:a=Math.floor(r/6e4)+"分钟前";break;case r<864e5:a=Math.floor(r/36e5)+"小时前";break;default:var o=e.getHours()<10?"0"+e.getHours():e.getHours(),i=e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes(),s=e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds();a=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" ",a+=o+":"+i+":"+s}return a}function M(t){var e="object"===(void 0===t?"undefined":x()(t))?t:new Date(t);return{year:e.getFullYear(),month:e.getMonth()+1,date:e.getDate()}}var C={install:function(t,e){t.prototype.friendlyDate=y,t.prototype.splitDate=M}},P=n("zL8q"),F=n.n(P);n("tvR6");r.default.config.productionTip=!1,r.default.use(F.a),r.default.use(C),new r.default({el:"#app",router:_,store:a.a,components:{App:b},template:"<App/>"})},Pfph:function(t,e,n){"use strict";var r=n("dXfV"),a="/auth/register",o="/auth/login",i="/auth/logout",s="/auth";e.a={logup:function(t){var e=t.username,n=t.password;return Object(r.a)(a,"POST",{username:e,password:n})},login:function(t){var e=t.username,n=t.password;return Object(r.a)(o,"POST",{username:e,password:n})},logout:function(){return Object(r.a)(i)},getInfo:function(){return Object(r.a)(s)}}},dXfV:function(t,e,n){"use strict";e.a=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new a.a(function(r,a){var o={url:t,method:e};"get"===e.toLowerCase()?o.params=n:o.data=n,i()(o).then(function(t){"ok"===t.data.status?r(t.data):(s.Message.error(t.data.msg),a(t.data))}).catch(function(t){s.Message.error("网络异常"),a({msg:"网络异常"})})})};var r=n("//Fk"),a=n.n(r),o=n("mtWM"),i=n.n(o),s=n("zL8q");n.n(s);i.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",i.a.defaults.baseURL="https://blog-server.hunger-valley.com",i.a.defaults.withCredentials=!0,i.a.defaults.timeout=6e4},gbux:function(t,e){},"n/GB":function(t,e){},tvR6:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.7f7fc45a850bc12ce5b7.js.map